{"version":3,"sources":["../../src/pages/sight-list/sight-list.module.ts","../../src/models/location.ts","../../src/pages/sight-list/sight-list.ts","../../src/models/sight.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SightListPage } from './sight-list';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SightListPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SightListPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n})\r\nexport class SightListPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sight-list/sight-list.module.ts","export class Location {\r\n    constructor(public lat: number, public long: number) {\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/location.ts","import { TranslateService } from '@ngx-translate/core';\r\nimport { ListService } from './../../services/lists';\r\nimport { SettingsService } from './../../services/settings';\r\nimport { SightList } from './../../models/sight-list';\r\nimport { Sight } from './../../models/sight';\r\nimport { MapsAPILoader } from '@agm/core';\r\nimport { Location } from './../../models/location';\r\nimport { Component, ViewChild, ChangeDetectorRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, ModalController } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the SightListPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\ndeclare var google: any;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-sight-list',\r\n  templateUrl: 'sight-list.html',\r\n})\r\nexport class SightListPage {\r\n\r\n  location: Location;\r\n  placesService;\r\n  loading: boolean = true;\r\n  sightList: SightList;\r\n\r\n  @ViewChild(\"map\") map;\r\n\r\n  constructor(private listService: ListService,\r\n    private settingsService: SettingsService,\r\n    private changeDetector: ChangeDetectorRef, private _mapsAPILoader: MapsAPILoader,\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private alertCtrl: AlertController,\r\n    private translateService: TranslateService,\r\n    private modalCtrl: ModalController\r\n  ) { }\r\n\r\n  delete(event, sight: Sight) {\r\n    event.stopPropagation();\r\n    this.translateService.get([\"delete_sight\", \"cancel\", \"confirm\"]).subscribe(values => {\r\n      this.alertCtrl.create({\r\n        title: values[\"delete_sight\"],\r\n        buttons: [\r\n          {\r\n            text: values[\"cancel\"],\r\n            role: 'cancel',\r\n            handler: data => {\r\n            }\r\n          },\r\n          {\r\n            text: values[\"confirm\"],\r\n            handler: data => {\r\n              this.sightList.removeSight(sight);\r\n              this.changeDetector.detectChanges();\r\n            }\r\n          }\r\n        ]\r\n      }).present();\r\n    });\r\n  }\r\n\r\n  deleteList() {\r\n    this.translateService.get([\"delete_list\", \"cancel\", \"confirm\"]).subscribe(values => {\r\n      this.alertCtrl.create({\r\n        title: values[\"delete_list\"],\r\n        buttons: [\r\n          {\r\n            text: values[\"cancel\"],\r\n            role: 'cancel',\r\n            handler: data => {\r\n            }\r\n          },\r\n          {\r\n            text: values[\"confirm\"],\r\n            handler: data => {\r\n              this.listService.removeList(this.sightList.id);\r\n              this.navCtrl.pop();\r\n            }\r\n          }\r\n        ]\r\n      }).present();\r\n    });\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.sightList = new SightList(this.translateService.instant([\"keyword\"]));\r\n    if (this.navParams.get(\"location\")) {\r\n      this.location = this.navParams.get(\"location\");\r\n      this._mapsAPILoader.load().then(() => {\r\n        this.placesService = new google.maps.places.PlacesService(this.map.nativeElement);\r\n        this.placesService.nearbySearch({\r\n          \"location\": new google.maps.LatLng(this.location.lat, this.location.long),\r\n          \"keyword\": this.translateService.instant([\"keyword\"]),\r\n          \"radius\": this.navParams.get(\"radius\") * 1000,\r\n          \"openNow\": this.navParams.get(\"openOnly\"),\r\n          \"type\": \"point_of_interest\"\r\n        }, (result) => {\r\n          this.loading = false;\r\n          this.sightList.clear();\r\n          this.sightList.center = this.location;\r\n          for (let sight of result) {\r\n            this.sightList.addSight(new Sight(sight.name,\r\n              typeof sight.photos !== \"undefined\" ? sight.photos[0].getUrl({ \"maxWidth\": 100, \"maxHeight\": 100 }) : '',\r\n              typeof sight.photos !== \"undefined\" ? sight.photos[0].getUrl({ \"maxWidth\": 1000, \"maxHeight\": 1000 }) : '',\r\n              sight.rating, sight.vicinity,\r\n              sight.place_id,\r\n              new Location(sight.geometry.location.lat(), sight.geometry.location.lng())));\r\n          }\r\n          this.changeDetector.detectChanges();\r\n          console.log(this.sightList)\r\n        });\r\n      });\r\n    } else {\r\n      this.sightList = this.listService.getList(this.navParams.get(\"id\"));\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  openMap() {\r\n    this.modalCtrl.create(\"SightMapPage\", {\r\n      \"sightList\": this.sightList\r\n    }).present();\r\n  }\r\n\r\n  openSight(event, sight: Sight) {\r\n    event.stopPropagation();\r\n    this.modalCtrl.create(\"SightPage\", {\r\n      \"sight\": sight\r\n    }).present();\r\n  }\r\n\r\n  done() {\r\n    if (!this.navParams.get(\"id\")) {\r\n      this.alertCtrl.create({\r\n        title: \"Choose a name\",\r\n        inputs: [\r\n          {\r\n            placeholder: \"Enter name\",\r\n            name: \"name\"\r\n          }\r\n        ],\r\n        buttons:\r\n          [\r\n            {\r\n              text: 'Cancel',\r\n              role: 'cancel',\r\n              handler: data => {\r\n              }\r\n            },\r\n            {\r\n              text: 'Save',\r\n              handler: data => {\r\n                this.sightList.name = data.name;\r\n                this.listService.addList(this.sightList);\r\n                this.navCtrl.pop();\r\n              }\r\n            }\r\n          ]\r\n      }).present();\r\n    } else {\r\n      this.listService.changeList(this.sightList);\r\n      this.navCtrl.pop();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sight-list/sight-list.ts","import { Location } from './location';\r\nexport class Sight {\r\n    constructor(public name: string,\r\n        public thumbnail: string,\r\n        public picture: string,\r\n        public rating: number,\r\n        public address: string,\r\n        public place_id: string,\r\n        public location: Location) {\r\n        if (!thumbnail) {\r\n            this.thumbnail = \"assets/img/placeholder_100.jpg\";\r\n        }\r\n\r\n        if (!picture) {\r\n            this.picture = \"assets/img/placeholder_big.jpg\"\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/sight.ts"],"sourceRoot":""}